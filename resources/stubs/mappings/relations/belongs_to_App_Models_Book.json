{
    "name": "BelongsTo Relation Test",
    "description": "Test mapping for Book belongsTo Author relation via author_name lookup",
    "source_schema": {
        "columns": {
            "title": {
                "name": "title",
                "type": "string",
                "null_count": 0,
                "unique_count": 10
            },
            "isbn": {
                "name": "isbn",
                "type": "string",
                "null_count": 0,
                "unique_count": 10
            },
            "price": {
                "name": "price",
                "type": "float",
                "null_count": 0,
                "unique_count": 10
            },
            "published_at": {
                "name": "published_at",
                "type": "date",
                "null_count": 0,
                "unique_count": 10
            },
            "is_active": {
                "name": "is_active",
                "type": "boolean",
                "null_count": 0,
                "unique_count": 2
            },
            "author_name": {
                "name": "author_name",
                "type": "string",
                "null_count": 0,
                "unique_count": 8
            }
        },
        "total_rows": 10
    },
    "mappings": [
        {
            "model": "App\\Models\\Book",
            "columns": [
                {
                    "source": "title",
                    "target": "title",
                    "transforms": ["trim"],
                    "default": null,
                    "validation_rule": "required|string|min:1|max:255",
                    "relation_lookup": null
                },
                {
                    "source": "isbn",
                    "target": "isbn",
                    "transforms": ["trim"],
                    "default": null,
                    "validation_rule": "required|string|regex:/^97[89]-\\d{10}$/|unique:books,isbn",
                    "relation_lookup": null
                },
                {
                    "source": "price",
                    "target": "price",
                    "transforms": ["trim"],
                    "default": null,
                    "validation_rule": "required|numeric|min:0|max:9999.99",
                    "relation_lookup": null
                },
                {
                    "source": "published_at",
                    "target": "published_at",
                    "transforms": ["trim", "cast:date"],
                    "default": null,
                    "validation_rule": "nullable|date|before_or_equal:today",
                    "relation_lookup": null
                },
                {
                    "source": "is_active",
                    "target": "is_active",
                    "transforms": ["trim", "cast:bool"],
                    "default": null,
                    "validation_rule": "boolean",
                    "relation_lookup": null
                },
                {
                    "source": "author_name",
                    "target": "author.name",
                    "transforms": ["trim"],
                    "default": null,
                    "validation_rule": null,
                    "relation_lookup": {
                        "field": "name",
                        "create_if_missing": true
                    }
                }
            ],
            "options": {
                "unique_key": "isbn",
                "duplicate_strategy": "update"
            }
        }
    ],
    "created_at": "2025-12-18T22:00:00+00:00",
    "updated_at": "2025-12-18T22:00:00+00:00"
}

